#!/bin/bash

echo "ðŸ§ª Ð¡ÐžÐ—Ð”ÐÐÐ˜Ð• Ð­ÐšÐ¡ÐŸÐ•Ð Ð˜ÐœÐ•ÐÐ¢ÐÐ›Ð¬ÐÐžÐ™ ÐšÐžÐŸÐ˜Ð˜ RSS MEDIA BUS"
echo "================================================="

# ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ð¿ÑƒÑ‚Ð¸
PRODUCTION_DIR="/opt/rss_media_bus"
EXPERIMENTAL_DIR="/opt/rss_media_bus_experimental"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ Ð² Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾Ð¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
cd $PRODUCTION_DIR || exit 1

echo "ðŸ“¦ Ð¡Ð¾Ð·Ð´Ð°ÑŽ Ð¿Ð¾Ð»Ð½ÑƒÑŽ ÐºÐ¾Ð¿Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°..."
cp -r $PRODUCTION_DIR $EXPERIMENTAL_DIR

cd $EXPERIMENTAL_DIR

echo "ðŸ§¹ ÐžÑ‡Ð¸Ñ‰Ð°ÑŽ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½ÑƒÑŽ ÐºÐ¾Ð¿Ð¸ÑŽ..."

# 1. Ð£Ð´Ð°Ð»ÑÐµÐ¼ production Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð’ÐÐ–ÐÐž!)
if [ -f "rss_media_bus.db" ]; then
    echo "   ðŸ’¾ Ð£Ð´Ð°Ð»ÑÑŽ production Ð‘Ð” (ÑÐ¾Ð·Ð´Ð°ÑÑ‚ÑÑ Ð½Ð¾Ð²Ð°Ñ Ð¿ÑƒÑÑ‚Ð°Ñ)"
    rm rss_media_bus.db
fi

# 2. ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð»Ð¾Ð³Ð¸
echo "   ðŸ“ ÐžÑ‡Ð¸Ñ‰Ð°ÑŽ Ð²ÑÐµ Ð»Ð¾Ð³Ð¸"
rm -f *.log
find . -name "*.log.gz" -delete 2>/dev/null || true

# 3. ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Python cache
echo "   ðŸ—‘ï¸ Ð£Ð´Ð°Ð»ÑÑŽ cache Ñ„Ð°Ð¹Ð»Ñ‹"
find . -name "__pycache__" -type d -exec rm -rf {} + 2>/dev/null || true
find . -name "*.pyc" -delete 2>/dev/null || true

# 4. Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐœÐ˜ÐÐ˜ÐœÐÐ›Ð¬ÐÐ«Ð• ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð´Ð»Ñ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð¾Ð²
echo "âš™ï¸ Ð¡Ð¾Ð·Ð´Ð°ÑŽ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¸..."

# Ð‘ÑÐºÐ°Ð¿Ð¸Ð¼ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¸
mv config/sources.yaml config/sources_production.yaml.backup
mv config/users.yaml config/users_production.yaml.backup

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ sources.yaml Ð´Ð»Ñ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð¾Ð² (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ 2 Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ°)
cat > config/sources.yaml << 'EOD'
# Ð­ÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ RSS Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸
# Ð’ÐÐ–ÐÐž: Ð­Ñ‚Ð¾ ÐÐ• production ÐºÐ¾Ð½Ñ„Ð¸Ð³! Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¾Ð².

sources:
  # Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸ Ð´Ð»Ñ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð¾Ð²
  test_habr:
    url: "https://habr.com/ru/rss/hub/programming/"
    name: "Ð¥Ð°Ð±Ñ€ - ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ (Ð¢Ð•Ð¡Ð¢)"
    active: true
    group: "tech_test"
  
  test_vc:
    url: "https://vc.ru/rss"
    name: "VC.ru ÐÐ¾Ð²Ð¾ÑÑ‚Ð¸ (Ð¢Ð•Ð¡Ð¢)" 
    active: true
    group: "tech_test"

# ============================================
# Ð”ÐžÐ‘ÐÐ’Ð›Ð¯Ð™Ð¢Ð• ÐÐžÐ’Ð«Ð• Ð˜Ð¡Ð¢ÐžÐ§ÐÐ˜ÐšÐ˜ Ð—Ð”Ð•Ð¡Ð¬ Ð”Ð›Ð¯ Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð¯
# ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð³Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ½Ð¾ÑÐ¸Ñ‚Ðµ Ð² production
# ============================================

  # ÐÐ¾Ð²Ñ‹Ðµ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ:
  # new_source_example:
  #   url: "https://example.com/rss"
  #   name: "ÐÐ¾Ð²Ñ‹Ð¹ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº (Ð¢Ð•Ð¡Ð¢)"
  #   active: false  # Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¿Ð¾ÑÐ»Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
  #   group: "new_test"
EOD

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¢Ð•Ð¡Ð¢ÐžÐ’Ð«Ð™ users.yaml
cat > config/users.yaml << 'EOD'
# Ð­ÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸
# Ð’ÐÐ–ÐÐž: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¢ÐžÐ›Ð¬ÐšÐž Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ñ… Ð±Ð¾Ñ‚Ð¾Ð² Ð¸ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ñ‡Ð°Ñ‚Ñ‹!

users:
  test_user:
    name: "Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ"
    active: true
    telegram_configs:
      test_bot:
        enabled: true
        # âš ï¸ Ð’ÐÐ–ÐÐž: Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° Ñ‚Ð¾ÐºÐµÐ½ Ð¢Ð•Ð¡Ð¢ÐžÐ’ÐžÐ“Ðž Ð±Ð¾Ñ‚Ð°!
        # Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð° Ñ‡ÐµÑ€ÐµÐ· @BotFather ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð¾Ð²
        bot_token: "YOUR_TEST_BOT_TOKEN_HERE"  
        
        # âš ï¸ Ð’ÐÐ–ÐÐž: Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð½Ð° ID Ð¢Ð•Ð¡Ð¢ÐžÐ’ÐžÐ“Ðž Ñ‡Ð°Ñ‚Ð°!
        # Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ð¾ Ð´Ð»Ñ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð¾Ð²
        chat_id: -1001234567890  
        
        # ÐœÐ°Ð¿Ð¿Ð¸Ð½Ð³ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð² Ðº Ñ‚Ð¾Ð¿Ð¸ÐºÐ°Ð¼ (Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ð¾ÑÐ»Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹)
        topics_mapping:
          test_habr: 1      # ID Ñ‚Ð¾Ð¿Ð¸ÐºÐ° Ð´Ð»Ñ Ð¥Ð°Ð±Ñ€Ð°
          test_vc: 2        # ID Ñ‚Ð¾Ð¿Ð¸ÐºÐ° Ð´Ð»Ñ VC.ru
        
        # Ð˜ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ)
        sources: ["test_habr", "test_vc"]

# ============================================
# Ð˜ÐÐ¡Ð¢Ð Ð£ÐšÐ¦Ð˜Ð¯ ÐŸÐž ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ•:
# 1. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð° Ñ‡ÐµÑ€ÐµÐ· @BotFather
# 2. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²ÑƒÑŽ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ Ð² Telegram  
# 3. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð±Ð¾Ñ‚Ð° Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ ÐºÐ°Ðº Ð°Ð´Ð¼Ð¸Ð½Ð°
# 4. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ‚Ð¾Ð¿Ð¸ÐºÐ¸ Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ðµ
# 5. Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ð¸ chat_id Ð²Ñ‹ÑˆÐµ
# 6. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ: ./start_system.sh
# ============================================
EOD

# 5. ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ config.py Ð´Ð»Ñ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð‘Ð”
echo "ðŸ“ ÐžÐ±Ð½Ð¾Ð²Ð»ÑÑŽ config.py Ð´Ð»Ñ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð‘Ð”..."
sed -i 's/rss_media_bus\.db/rss_media_bus_experimental.db/g' config.py

# 6. Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ð¹ README Ð´Ð»Ñ ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð¾Ð²
cat > EXPERIMENTAL_README.md << 'EOD'
# ðŸ§ª RSS Media Bus - Ð­ÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð°Ñ ÐºÐ¾Ð¿Ð¸Ñ

Ð­Ñ‚Ð¾ **Ð¸Ð·Ð¾Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ ÐºÐ¾Ð¿Ð¸Ñ** Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð´Ð»Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ð³Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð½Ð¾Ð²Ñ‹Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹.

## âš ï¸ ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐ˜ Ð’ÐÐ–ÐÐž

1. **ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ð°Ñ Ð‘Ð”**: `rss_media_bus_experimental.db` (Ð½Ðµ Ð²Ð»Ð¸ÑÐµÑ‚ Ð½Ð° production)
2. **Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¸**: Ð²ÑÐµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¸Ð·Ð¾Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹ Ð¾Ñ‚ production
3. **ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð±Ð¾Ñ‚**: Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¢ÐžÐ›Ð¬ÐšÐž Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ Telegram Ð±Ð¾Ñ‚Ð°
4. **ÐžÑ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‡Ð°Ñ‚**: ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ñ‚ÐµÑÑ‚Ð¾Ð²ÑƒÑŽ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ

## ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### 1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Telegram Ð±Ð¾Ñ‚Ð°
```
1. ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ @BotFather Ð² Telegram
2. /newbot â†’ ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¸Ð¼Ñ "RSS Test Bot" 
3. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½
4. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²ÑƒÑŽ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²
5. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð±Ð¾Ñ‚Ð° Ð² Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ ÐºÐ°Ðº Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°
```

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
```bash
# ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³
nano config/users.yaml

# Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ:
# - YOUR_TEST_BOT_TOKEN_HERE Ð½Ð° Ñ‚Ð¾ÐºÐµÐ½ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð°
# - -1001234567890 Ð½Ð° ID Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¹ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹
```

### 3. Ð—Ð°Ð¿ÑƒÑÐº ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
```bash
cd /opt/rss_media_bus_experimental
./start_system.sh
```

## ðŸ“ Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð½Ð¾Ð²Ñ‹Ñ… Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð²

### Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ°:
1. ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `config/sources.yaml`
2. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸Ðº Ñ `active: true`
3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ñ‚Ð¾Ð¿Ð¸Ðº Ð² `config/users.yaml`
4. ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ: `./start_system.sh`

### ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ°:
```yaml
# Ð’ config/sources.yaml
new_tech_blog:
  url: "https://techblog.example.com/feed"
  name: "Tech Blog (Ð¢Ð•Ð¡Ð¢)"
  active: true
  group: "new_sources"

# Ð’ config/users.yaml Ð² topics_mapping:
new_tech_blog: 3  # ID Ñ‚Ð¾Ð¿Ð¸ÐºÐ° Ð² Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¹ Ð³Ñ€ÑƒÐ¿Ð¿Ðµ
```

## ðŸ” ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ñ‚ÐµÑÑ‚Ð¾Ð²

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð²
ps aux | grep -E "(rss_bus_core|user_notification)"

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²
tail -f rss_core.log
tail -f user_service.log

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð‘Ð”
sqlite3 rss_media_bus_experimental.db "SELECT COUNT(*) FROM articles;"
```

## ðŸ”™ Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‚ Ðº production

Production ÑÐ¸ÑÑ‚ÐµÐ¼Ð° ÐÐ• Ð·Ð°Ñ‚Ñ€Ð¾Ð½ÑƒÑ‚Ð°. Ð”Ð»Ñ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‚Ð°:
```bash
cd /opt/rss_media_bus
./start_system.sh
```

## ðŸ“Š ÐŸÐ¾ÑÐ»Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ñ… Ñ‚ÐµÑÑ‚Ð¾Ð²

1. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿Ñ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¸ Ð² production `config/sources.yaml`
2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ñ‚Ð¾Ð¿Ð¸ÐºÐ¸ Ð² production `config/users.yaml`
3. ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ production ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ

## âš¡ ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð¾Ð²
pkill -f "rss_bus_core.py|user_notification_service.py"

# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ð‘Ð”
rm rss_media_bus_experimental.db

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð°Ñ€Ñ…Ð¸Ð²Ð½Ñ‹Ñ… ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð¾Ð² production
cat config/sources_production.yaml.backup
```
EOD

echo ""
echo "âœ… Ð­ÐšÐ¡ÐŸÐ•Ð Ð˜ÐœÐ•ÐÐ¢ÐÐ›Ð¬ÐÐÐ¯ ÐšÐžÐŸÐ˜Ð¯ Ð¡ÐžÐ—Ð”ÐÐÐ!"
echo ""
echo "ðŸ“ Ð Ð°ÑÐ¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ: $EXPERIMENTAL_DIR"
echo ""
echo "ðŸ”§ ÐžÐ‘Ð¯Ð—ÐÐ¢Ð•Ð›Ð¬ÐÐ«Ð• Ð¡Ð›Ð•Ð”Ð£Ð®Ð©Ð˜Ð• Ð¨ÐÐ“Ð˜:"
echo ""
echo "1. ðŸ¤– Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ Telegram Ð±Ð¾Ñ‚Ð°:"
echo "   - ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ @BotFather"
echo "   - /newbot â†’ 'RSS Test Bot'"
echo "   - Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½"
echo ""
echo "2. ðŸ‘¥ Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²ÑƒÑŽ Ð³Ñ€ÑƒÐ¿Ð¿Ñƒ:"
echo "   - ÐÐ¾Ð²Ð°Ñ Ð³Ñ€ÑƒÐ¿Ð¿Ð° Ð² Telegram"
echo "   - Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð±Ð¾Ñ‚Ð° ÐºÐ°Ðº Ð°Ð´Ð¼Ð¸Ð½Ð°"
echo "   - Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ 2 Ñ‚Ð¾Ð¿Ð¸ÐºÐ°: 'Ð¥Ð°Ð±Ñ€' Ð¸ 'VC.ru'"
echo ""
echo "3. âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ:"
echo "   nano $EXPERIMENTAL_DIR/config/users.yaml"
echo "   # Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ YOUR_TEST_BOT_TOKEN_HERE Ð¸ chat_id"
echo ""
echo "4. ðŸš€ Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ñ‚ÐµÑÑ‚Ñ‹:"
echo "   cd $EXPERIMENTAL_DIR"
echo "   ./start_system.sh"
echo ""
echo "ðŸ“– ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸: $EXPERIMENTAL_DIR/EXPERIMENTAL_README.md"
echo ""
echo "âš ï¸ Ð’ÐÐ–ÐÐž: ÐÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ production Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð¸ Ñ‡Ð°Ñ‚Ñ‹!"