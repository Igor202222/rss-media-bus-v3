# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ RSS Media Bus v3.0

## üìä **–ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

### **üéØ –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è:**
```
RSS Sources ‚Üí RSS Media Bus ‚Üí Processors ‚Üí Users
```

**–≠–≤–æ–ª—é—Ü–∏—è –æ—Ç v2.0:**
- ‚ùå **–ë—ã–ª–æ:** N —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ = N –∫–æ–ø–∏–π –∫–æ–¥–∞ = –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ **–°—Ç–∞–ª–æ:** 1 —à–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π = —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ = –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

## üîÑ **–°—Ö–µ–º–∞ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö**

### **üì° RSS –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```
config/sources.yaml ‚Üí rss_monitoring.py ‚Üí source_manager.py ‚Üí MockDBManager
                                     ‚Üì
                          debug_chat_logger.py ‚Üí Telegram —Ç–æ–ø–∏–∫
```

### **üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:**
```
Telegram Bot (@rss_media_bus_user_bot) 
    ‚Üì /start
user_bot/telegram_user_bot.py 
    ‚Üì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
config/users.yaml (–µ–¥–∏–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)
```

### **üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
RSS –ø—Ä–æ—Ü–µ—Å—Å—ã ‚Üí debug_chat_logger.py ‚Üí Telegram —á–∞—Ç (-1002756550488)
                                         ‚Üì
                                   –¢–æ–ø–∏–∫ "üì° RSS –ú–û–ù–ò–¢–û–†–ò–ù–ì" (ID: 3)
```

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å—Ç–∞—Ç—É—Å—ã**

```
/opt/rss_media_bus/
‚îú‚îÄ‚îÄ üîß main.py                    # ‚úÖ MVP —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ üìä rss_monitoring.py          # ‚úÖ –†–ê–ë–û–¢–ê–ï–¢: –§–æ–Ω–æ–≤—ã–π RSS –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îú‚îÄ‚îÄ üìÑ requirements.txt           # ‚úÖ –ì–û–¢–û–í–û: feedparser, requests, telegram
‚îÇ
‚îú‚îÄ‚îÄ üìÅ config/                    # ‚úÖ –ì–û–¢–û–í–û
‚îÇ   ‚îú‚îÄ‚îÄ sources.yaml             # ‚úÖ 6 RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, 5 –º–∏–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª
‚îÇ   ‚îî‚îÄ‚îÄ users.yaml              # ‚úÖ –ï–¥–∏–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ
‚îú‚îÄ‚îÄ üìÅ core/                     # ‚úÖ –ì–û–¢–û–í–û (–∏–∑ v2.0)
‚îÇ   ‚îú‚îÄ‚îÄ source_manager.py        # ‚úÖ AsyncRSSParser
‚îÇ   ‚îú‚îÄ‚îÄ database.py             # ‚úÖ DatabaseManager (SQLite)
‚îÇ   ‚îú‚îÄ‚îÄ config_hot_reload.py    # ‚úÖ –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ long_term_monitor.py    # ‚úÖ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ processors/             # üöß –ü–£–°–¢–ê–Ø: keyword_filter.py TODO
‚îÇ
‚îú‚îÄ‚îÄ üìÅ outputs/                  # ‚úÖ –ì–û–¢–û–í–û
‚îÇ   ‚îú‚îÄ‚îÄ telegram_sender.py       # ‚úÖ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (9.2KB)
‚îÇ   ‚îú‚îÄ‚îÄ telegram_health_reporter.py # ‚úÖ –û—Ç—á–µ—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è (14KB)
‚îÇ   ‚îî‚îÄ‚îÄ debug_chat_logger.py    # ‚úÖ –†–ê–ë–û–¢–ê–ï–¢: –õ–æ–≥–∏ –≤ —Ç–æ–ø–∏–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ üìÅ user_bot/                 # ‚úÖ –ì–û–¢–û–í–û
‚îÇ   ‚îî‚îÄ‚îÄ telegram_user_bot.py    # ‚úÖ –†–ê–ë–û–¢–ê–ï–¢: –ê–≤—Ç–æ-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ üìÅ subscribers/              # üöß –ü–£–°–¢–ê–Ø: user_manager.py TODO
‚îú‚îÄ‚îÄ üìÅ legacy_bridge/            # üöß –ü–£–°–¢–ê–Ø: –º–∏–≥—Ä–∞—Ü–∏—è —Å v2.0 TODO
‚îú‚îÄ‚îÄ üìÅ web_dashboard/           # üöß –ü–£–°–¢–ê–Ø: –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å TODO
‚îî‚îÄ‚îÄ üìÅ docs/                    # ‚úÖ –ì–û–¢–û–í–û: –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üíæ **–°—Ö–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**

### **üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–µ–¥–∏–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)**

**–§–∞–π–ª:** `config/users.yaml`
```yaml
users:
  test_user:                    # –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    name: "Test Monitor"
    sources: [tass_main, ria_main, rbc_main]
    telegram: { enabled: false }
    
  yrcnw_user:                   # ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
    name: "–ò Monitor"
    telegram_id: 2337404
    username: "yrcnw"
    sources: [tass_main, ria_main]
    registration_method: "telegram_bot"
    created_at: "2025-07-19T15:12:54"
    telegram: 
      chat_id: "2337404"
      enabled: false            # –ù–µ—Ç bot_token –ø–æ–∫–∞
```

### **üì° RSS –ò—Å—Ç–æ—á–Ω–∏–∫–∏ (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)**

**–§–∞–π–ª:** `config/sources.yaml`
```yaml
sources:
  tass_main:                   # ‚úÖ –ê–ö–¢–ò–í–ï–ù
    url: "https://tass.ru/rss/v2.xml"
    name: "–¢–ê–°–° - –ì–ª–∞–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏"
    update_interval: 300       # 5 –º–∏–Ω—É—Ç (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ)
    active: true
    
  ria_main:                    # ‚úÖ –ê–ö–¢–ò–í–ï–ù
    url: "https://ria.ru/export/rss2/archive/index.xml"
    update_interval: 300
    
  # ... –µ—â–µ 4 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–≤—Å–µ–≥–æ 6 –∞–∫—Ç–∏–≤–Ω—ã—Ö)

source_groups:                 # –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
  russian_news: [tass_main, ria_main, rbc_main]
  international_sustainability: [reuters, bbc, techcrunch]
```

### **üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å)**

**–¢–µ–∫—É—â–∞—è:** MockDBManager (–≤ –ø–∞–º—è—Ç–∏)
```python
class MockDBManager:
    def __init__(self):
        self.articles = []        # –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
        self.feeds_info = {}      # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö
    
    def article_exists(link) ‚Üí bool     # ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
    def add_article(...) ‚Üí int          # ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
    def update_feed_info(...) ‚Üí None    # ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
```

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:** DatabaseManager (SQLite)
```sql
-- core/database.py - –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
articles(id, feed_id, title, link, description, content, author, published_date)
feeds(id, title, url, last_check, status)
```

## üîÑ **–ü—Ä–æ—Ü–µ—Å—Å—ã –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è**

### **‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:**

#### **üìä RSS –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- **–§–∞–π–ª:** `rss_monitoring.py`
- **–†–µ–∂–∏–º:** –§–æ–Ω–æ–≤—ã–π (nohup)
- **PID:** –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–π (–ø—Ä–æ–≤–µ—Ä—è—Ç—å —á–µ—Ä–µ–∑ `ps aux | grep rss_monitoring`)
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª:** 5 –º–∏–Ω—É—Ç
- **–õ–æ–≥–∏:** `rss_monitor.log`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, –ø–∞—Ä—Å–∏—Ç –Ω–æ–≤–æ—Å—Ç–∏, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ Telegram

#### **ü§ñ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –±–æ—Ç:**
- **–§–∞–π–ª:** `user_bot/telegram_user_bot.py`
- **–¢–æ–∫–µ–Ω:** `7441299677:AAFJn2pDdvQ4BsMVeTBvDzsT8kLpBNDGlwk`
- **–ë–æ—Ç:** [@rss_media_bus_user_bot](https://t.me/rss_media_bus_user_bot)
- **–§—É–Ω–∫—Ü–∏–∏:** `/start` (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è), `/status`, `/sources`, `/help`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ `users.yaml`

#### **üìä Debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- **–§–∞–π–ª:** `outputs/debug_chat_logger.py`
- **–¢–æ–∫–µ–Ω:** `8171335651:AAFv3gO3dCZTLxu62JLtWsK6Gza7bdAoYVc`
- **–ß–∞—Ç:** `-1002756550488`
- **–¢–æ–ø–∏–∫–∏:** 
  - ID: 3 "üì° RSS –ú–û–ù–ò–¢–û–†–ò–ù–ì" ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
  - –î—Ä—É–≥–∏–µ —Ç–æ–ø–∏–∫–∏ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–¥–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

## üîß **–¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–æ–±–ª–µ–º—ã**

### **‚ö†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
1. **MockDBManager** - –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
2. **Hot reload –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ —Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
3. **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Telegram API
4. **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç keyword_filter.py** - –Ω–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º

### **üìù –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
1. **–û—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã** - RSS –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–∑–∞–≤–∏—Å–∏–º –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –±–æ—Ç–∞
2. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏** - –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config/`
3. **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
4. **Telegram-centric** - –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —á–µ—Ä–µ–∑ Telegram

## üéØ **–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### **üîÑ Publisher-Subscriber:**
```
RSS Sources (Publishers) ‚Üí RSS Media Bus ‚Üí Users (Subscribers)
```

### **üè≠ Factory Pattern:**
```python
# –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
processors = ProcessorFactory.create_from_config(user_config)
```

### **üîå Plugin Architecture:**
```
core/processors/
‚îú‚îÄ‚îÄ keyword_filter.py    # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ translator.py        # –ü–µ—Ä–µ–≤–æ–¥
‚îú‚îÄ‚îÄ sentiment_analyzer.py # –ê–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ custom_processor.py  # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ
```

## üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**

### **üìä –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** ~100 (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ MockDBManager)
- **RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏:** ~20 (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —Ç–∞–π–º–∞—É—Ç–∞–º–∏)
- **–ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 5 –º–∏–Ω—É—Ç (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

### **üöÄ –ü–ª–∞–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:**
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite ‚Üí PostgreSQL –¥–ª—è >1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Redis –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–û—á–µ—Ä–µ–¥–∏:** Celery –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫

---

**üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –Ω–∞ 75% - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤**  
*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ò—é–ª—å 2025* 